'use strict';(function(factory){if(typeof define==='function'&&define.amd){define(function(){return factory(window);});}else if(typeof module==='object'&&module.exports){module.exports=function(root){return factory(root);};}else{factory(window);}}(function(window){
var h=function(t,n){return t?Array.prototype.slice.call(t,n||0):[]},s=function(t,n){for(var i=1,e=arguments.length;i<e;i++){var r=arguments[i];if(r){var s=Object.keys(r);for(i=0,e=s.length;i<e;i++){var a=s[i];Object.getOwnPropertyDescriptor(r,a).configurable&&Object.defineProperty(t,a,{configurable:!0,value:r[a],enumerable:!1,writable:!0})}}}return t},l=function(t,n){for(var i=1,e=arguments.length;i<e;i++){var r=arguments[i];for(var s in r)try{t[s]=r[s]}catch(t){}}return t},o=function(t,n){t=t||{};for(var i=1,e=arguments.length;i<e;i++){var r=arguments[i];for(var s in r)t.hasOwnProperty(s)||(t[s]=r[s]),a=t[s],"[object Object]"==Object.prototype.toString.call(a)&&(t[s]=o(t[s],r[s]))}var a;return t},a=function(t,n){t=t||{};for(var i=1,e=arguments.length;i<e;i++){var r=arguments[i];for(var s in r)t.hasOwnProperty(s)||(t[s]=r[s])}return t},c=function(t,n,i){var e=(i=i||0)?t.substring(i):t,r=e.match(n);return r?e.indexOf(r[0])+i:-1},k=function(t,n,i){return"number"!=typeof i&&(i=0),!("string"==typeof t&&i+n.length>t.length)&&-1!==t.indexOf(n,i)},r=function(t,n){n instanceof Array||(n=h(arguments,1));var i={};for(var e in t)i[e]=!0;for(var r=0,s=n.length;r<s;r++){var a=n[r],o=Object.getOwnPropertyDescriptor(t,a);if(!o||o.writable){if(!(t[a]instanceof Function)){var c="Cannot bindAll to non-function '"+a+"'";throw console.log(c,t),c}var u=i[a];Object.defineProperty(t,a,{value:t[a].bind(t),enumerable:u,writable:!0,configurable:!0})}}},i=function(t,n){return t.removeAttribute?t.removeAttribute(n):t.attributes.removeNamedItem&&t.attributes.getNamedItem(n)?t.attributes.removeNamedItem(n):void t.setAttribute(n,"")},u=function(t){if(t.remove)return t.remove();t.parentNode.removeChild(t)},e=function(t,n){if(n=a(n,{bubbles:!1,cancelable:!0}),!e.t)try{return new Event(t,n)}catch(t){e.t=!0}var i;if(e.t)return(i=document.createEvent("Event")).initEvent(t,n.bubbles,n.cancelable),i},f=function(t){if(!t.events||!t.trigger){var n={};t.events||(n.events=new d),t.trigger||(n.trigger=m.trigger),s(t,n)}},v=function(t,n,i){if((t=h(t))[0]instanceof Object){var e=t[1]||this;for(var r in t[0])for(var s=0,a=(u=r.split(" ")).length;s<a;s++){var o=u[s],c=t[0][r];n.call(i,o,c,e)}}else if("string"==typeof t[0]){var u;for(e=t[2]||this,a=(u=t[s=0].split(" ")).length;s<a;s++)o=u[s],c=t[1],n.call(i,o,c,e)}else if(0===t.length)return n.call(i,null,null,null)},d=function(){};d.prototype=new Array;var b=function(t){if(t.name){if(!t.callback)throw"Cannot find callback";f(t.from),f(t.to),this.from=t.from,this.to=t.to,this.context=t.context,this.name=t.name,this.callback=t.callback,this.once=t.once,this.from.events.push(this),this.from!==this.to&&this.to.events.push(this)}};b.prototype.destroy=function(){this.from.events=this.from.events.filter(function(t){return t!==this}.bind(this)),this.from!==this.to&&(this.to.events=this.to.events.filter(function(t){return t!==this}.bind(this)))};var m={events:null,listenTo:function(t,n,i){var e=h(arguments,1);e.push(t),v(e,function(t,n,i){new b({from:i,to:this,context:this,name:t,callback:n,once:!1})},this)},listenToOnce:function(t,n,i){var e=h(arguments,1);e.push(t),v(e,function(t,n,i){new b({from:i,to:this,context:this,name:t,callback:n,once:!0})},this)},stopListening:function(t,n,i){var e=h(arguments,1);e.push(t),v(e,function(t,n,i){for(var e=this.events.length-1;-1<e;e--){var r=this.events[e];r.to===this&&(null!==t&&r.name!==t||null!==n&&r.callback!==n||r.destroy())}},this)},on:function(t,n,i){v(arguments,function(t,n,i){new b({from:this,to:this,context:i,name:t,callback:n,once:!1})},this)},once:function(t,n,i){v(arguments,function(t,n,i){new b({from:this,to:this,context:i,name:t,callback:n,once:!0})},this)},off:function(t,n,i){v(arguments,function(t,n,i){for(var e=this.events.length-1;-1<e;e--){var r=this.events[e];r.from===this&&(null!==t&&r.name!==t||null!==n&&r.callback!==n||r.destroy())}},this)},trigger:function(t){f(this);for(var n=h(arguments,1),i=[],e=0,r=this.events.length;e<r;e++)(s=this.events[e]).from===this&&s.name===t&&i.push(s);for(i.reverse(),e=i.length-1;-1<e;e--){var s;(s=i[e]).callback.apply(s.context,n),s.once&&s.destroy()}},destroy:function(){this.stopListening()}},g=function(t,n){var i=!!n;n=n||t;for(var e={},r=Object.getOwnPropertyNames(n),s=0,a=r.length;s<a;s++){var o,c,u=r[s],h=u.indexOf("$");if((-1!==h||i)&&(c=-1===h?(o="",u):(o=u.slice(h),u.slice(0,h)))){var l=o.split("$"),f=k(l,"get"),v=k(l,"set"),d=k(l,"value"),b=k(l,"enum"),m=k(l,"write"),g=k(l,"config"),p=0;if(p+=f?1:0,p+=v?1:0,1<(p+=d?1:0))throw"Cannot have two types in one definition.";p+=b?1:0,p+=m?1:0,p+=g?1:0;var w=e[c]=e[c]||{value:n[u]};d&&(w.value=n[u]),f&&(w.get=n[u]),v&&(w.set=n[u]),b&&(w.enumerable=!0),m&&(w.writable=!0),g&&(w.configurable=!0),w.value&&(w.get||w.set)&&delete w.value,delete n[u],delete t[c]}}return Object.keys(e).length&&Object.defineProperties(t,e),t},p=function(t,n,i){var e,r=this;return e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return r.apply(this,arguments)},Object.defineProperty(e,"options",{value:a(i,r.options,{extendFunction:!0,inheritClassEnumerables:!1,classEvents:!1,classProperties:!0,instanceEvents:!1,instanceProperties:!0}),enumerable:!1,writable:!0}),e.prototype=Object.create(r.prototype),e.options.extendFunction&&s(e,{extend:p}),e.options.classEvents&&s(e,m),e.options.inheritClassEnumerables&&l(e,r),l(e,n),e.options.instanceEvents&&s(e.prototype,m),l(e.prototype,t),e.options.instanceProperties&&(Object.defineProperty(e.prototype,"defineProperties",{value:function(t){return g(this,t)},enumerable:!1,writable:!1,configurable:!1}),g(e.prototype)),e.options.classProperties&&(Object.defineProperty(e,"defineProperties",{value:function(t){return g(this,t)},enumerable:!1,writable:!1,configurable:!1}),g(e)),s(e.prototype,{constructor:e}),e},t=function(t,n){};t.prototype=new Array;var n=p.call(function(t,n){},{},{},{classEvents:!1,instanceEvents:!1}),w=p.call(t,{},{},{classEvents:!1,instanceEvents:!1}),y=w.extend({subject:null,constructor:function(t,n){this.subject=n||document,this.add(t,this.subject),this.selector=t},filterByAttribute:function(e,r){var t=this.filter(function(t){var n=t.getAttribute(e);if(n){var i=n.split(" ");return!!k(i,r)||void 0}});return new y(t)},filterByTypes:function(t){var i=t.split(",").map(function(t){return t.trim()}),n=this.filter(function(t){var n=t.tagName.toLowerCase();if(k(i,n))return!0});return new y(n)},find:function(n){var i=new y;return this.forEach(function(t){i.push.apply(i,y.querySelectorAll(t,n))}),i},stack:function(n){var t=this.parents();return t.unshift(this[0]),n&&(t=t.filter(function(t){return t.matches(n)})),t},parents:function(n){for(var t=this[0],i=new y;(t=t.parentNode)&&i.add(t),t;);return n&&(i=i.filter(function(t){return t.matches(n)})),i},add:function(t,n){if(this.selector="",n=n||document,t instanceof HTMLElement)return this.push(t),this;if(t instanceof Array){for(var i=0,e=t.length;i<e;i++)this.add(t[i]);return this}if("string"!=typeof t)return this;var r=y.querySelectorAll(n,t);for(i=0,e=r.length;i<e;i++)this.push(r[i]);return this},clone:function(t){for(var n=[],i=0,e=this.length;i<e;i++)n.push(this[i].cloneNode(t));return new y(n,this.subject)},on:function(n,i,e){if(n instanceof Object){for(var t in n)this.on(t,n[t],i);return this}return this.forEach(function(t){t.addEventListener(n,i,e)}),this},off:function(n,i){if(n instanceof Object){for(var t in n)this.off(t,n[t]);return this}return this.forEach(function(t){t.removeEventListener(n,i)}),this}},{fallback:!1,combinatorWithOptionalWhiteSpace$value:/^( *([+~> ,]|\|\|){1} *)/,types$value:/(\[[^\]]+\])*((\.|\:|\#|\w|\*|\[){1}[^\[ >~|+,]*(\[[^\]]+\])*[^\[ >~|+,]*)/,querySelectorAll$value:function(t,n){if(!y.fallback)return t.querySelectorAll(n);var i=[],e=n.trim();do{var r=y.types.exec(e),s=y.combinatorWithOptionalWhiteSpace.exec(e);if(!r&&!s)break;switch(!r||s&&s.index<r.index?"combinator":"type"){case"combinator":var a=s[0];i.push(a),e=e.slice(a.length);break;case"type":a=r[0],i.push(a),e=e.slice(a.length)}}while(e.length);if(y.combinatorWithOptionalWhiteSpace.test(i[0])&&i.unshift(":scope"),":scope"===i[0])switch(i[1].trim()){case">":if(i.length<=2)throw"Invalid selector";for(var o=t.children,c=[],u=0,h=o.length;u<h;u++){var l=o[u];if(l.matches(i[2]))if(3!==i.length){var f=i.slice(3).join(" "),v=y.querySelectorAll(l,f);c.push.apply(c,v)}else c.push(l)}return c;default:throw"Invalid starting combinator for scope '"+i[1]+"'"}return t.querySelectorAll(n)}});try{document.createElement("div").querySelector(":scope > *"),y.fallback=!1}catch(t){console.log("No support for ':scope' selector. Using fallback."),y.fallback=!0}l(T=function(t,n){return new y(t,n)},y);var T,x=n.extend({el:null,target:null,options:null,constructor:function t(n,i,e){r(this,"onTimeUpdate","onTextTrackChange","onCueEnter","onCueExit"),this.el=n,this.target=i,this.options=e,(this.el[t.propName]=this).setUpListeners(),this.defineProperties({tracks$enum$write:new t.TextTrackList(this)})},dispatchEvent:function(t,n){var i=e(t,n);i.fake=!0,l(i,n),this.el.dispatchEvent(i)},setUpListeners:function(){T(this.el).on({timeupdate:this.onTimeUpdate,texttrackchange:this.onTextTrackChange,cueenter:this.onCueEnter,cueexit:this.onCueExit})},onTimeUpdate:function(){for(var t=0,n=this.tracks.length;t<n;t++)this.tracks[t].update()},onTextTrackChange:function(t){this.target.innerHTML=""},onCueEnter:function(t){this.target.appendChild(t.cue.getCueAsHTML())},onCueExit:function(t){for(var n=this.target.querySelectorAll("#"+t.cue.id),i=0,e=n.length;i<e;i++){var r=n[i];u(r)}},destroy:function(){delete this.el[x.propName],T(this.el).off({timeupdate:this.onTimeUpdate,texttrackchange:this.onTextTrackChange,cueenter:this.onCueEnter,cueexit:this.onCueExit}),this.tracks.destroy(),this.el=null,this.target=null,this.options=null,this.stopListening()}},{supportedTags$write:"video, audio, canvas, img",propName:"subtitles",List:w.extend({},{},{instanceEvents:!0})},{instanceEvents:!0});x.DefaultOptions=n.extend({constructor:function(t){this.add(t)},add$value:function(t){l(this,t)},get$value:function(t){if(t)return this[t];var n={};for(var t in this)n[t]=this[t];return n}},{add$value$enum:function(t){o(this.prototype,t)},get$value$enum:function(t){if(t)return this.prototype[t];var n={};for(var t in this.prototype)n[t]=this.prototype[t];return n}},{inheritClassEnumerables:!0}),x.DefaultOptions.add({classprefix:"subtitles--"}),$&&$.fn&&(x.JQueryDefaultOptions=x.DefaultOptions.extend({constructor:function(){x.DefaultOptions.prototype.constructor.apply(this,arguments)}}),x.JQueryDefaultOptions.add({}),$.fn.subtitles=function(t,n){var i=this.find(x.supportedTags);switch(i=i.add(this.filter(x.supportedTags)),t){case"destroy":return i.each(function(t,n){n[x.propName]instanceof x&&n[x.propName].destroy()}),i}var e=$(t)[0],r=i[0];if(!r[x.propName])return n=new x.JQueryDefaultOptions(n),new x(r,e,n),i}),x.TextTrack=x.extend({activeCues:null,cues:null,readyState:0,label:null,kind:null,language:null,el:null,media:null,mode:"hidden",n:!1,default$get:function(){return this.n},default$set:function(t){if(this.n!==t){this.n=t,this.trigger("change",!0),this.media.dispatchEvent("texttrackchange",{track:this});for(var n=0,i=this.activeCues.length;n<i;n++)this.activeCues[n].live=!1;this.activeCues.length=0}},constructor:function(t,n){this.cues=[],this.activeCues=[],this.el=n,this.media=t,this.default=null!==this.el.getAttribute("default"),this.language=this.el.getAttribute("srclang"),this.label=this.el.getAttribute("label"),this.kind=this.el.getAttribute("kind"),i(this.el,"default"),this.fetch()},addCue:function(t){for(var n=this.cues.length-1;-1<n;n--){var i=this.cues[n];if(i===t||i.id===t.id)return}this.cues.push(t)},removeCue:function(t){for(var n=this.cues.length-1;-1<n;n--){var i=this.cues[n];i!==t&&i.id!==t.id||this.cues.splice(n,1)}},update$value:function(){if(this.default){var n=this.media.el.currentTime,t=this.cues.filter(function(t){return t.startTime<=n&&t.endTime>=n&&!t.live}),i=this.activeCues.filter(function(t){return(t.startTime>n||t.endTime<n)&&t.live});0===t.length&&0===i.length||(i.forEach(function(t){t.live=!1}),this.activeCues=this.activeCues.filter(function(t){return!(t.startTime>n||t.endTime<n)}),this.activeCues.push.apply(this.activeCues,t),t.forEach(function(t){t.live=!0}),this.media.dispatchEvent("cuechange",{track:this,media:this}))}},fetch$value:function(){var t,n,i,e;this.readyState=x.TextTrack.READYSTATE.LOADING,t=this.el.src,n=function(t){t?(this.parse(t)?this.readyState=x.TextTrack.READYSTATE.LOADED:this.readyState=x.TextTrack.READYSTATE.ERROR,this.trigger("load",this)):this.readyState=x.TextTrack.i.ERROR},i=this,(e=new XMLHttpRequest).addEventListener("load",function(t){n.call(i,t.target.responseText)}),e.open("GET",t),e.send()},parse$value:function(t){for(var n=-1<t.indexOf("\r\n")?"\r\n":"\n",i=t.split(n),e=[],r=[],s=0,a=i.length;s<a;s++){var o=i[s],c=s===i.length-1,u=!o;if(c&&!u&&r.push(o),(c||u)&&r.length){if(-1<r[0].toLowerCase().indexOf("webvtt")&&(r.splice(0,1),!r.length))continue;e.push({title:null,lines:r}),r=[]}else u||r.push(o)}try{for(s=0,a=e.length;s<a;s++)if(0!==(r=e[s]).lines[0].indexOf("NOTE"))if(0===r.lines[0].indexOf("STYLE"))console.log("Media does not support STYLE lines in WebVTT yet. Please leave an issue if needed.");else{if(-1===r.lines[0].indexOf("--\x3e")&&(r.title=r.lines[0],r.lines.shift()),-1===r.lines[0].indexOf("--\x3e")){this.readyState=x.TextTrack.READYSTATE.ERROR;break}l(r,this.parseTimePlacement(r.lines[0])),r.lines.shift();var h=new x.TextTrackCue(r.startTime,r.endTime,r.lines.join("\n"));h.track=this,h.lineAlign=r.align,h.line=r.line,h.position=r.position,h.size=r.size,h.vertical=r.vertical,this.addCue(h)}}catch(t){return console.log(t),!1}return!0},parseTimePlacement$value:function(t){if(t=t.trim(),-1===(i=c(t,/-->/)))throw"Time declaration error, no --\x3e";var n=t.slice(0,i).trim();t=t.slice(i);var i,e=c(t,/[0-9]+/);if(-1===e)throw"Time declaration error, no end time";t=t.slice(e),-1===(i=c(t,/[ ]{1}/))&&(i=t.length);var r=t.slice(0,i).trim();return t=t.slice(i),l({startTime:this.parseTime(n),endTime:this.parseTime(r)},this.parsePlacement(t))},timeUnits$value:[.001,1,60,360],parseTime$value:function(t){var n=t.split(/[\:\.\,]{1}/g).reverse();if(n.length<3)throw"Time declaration error, mm:ss.ttt or hh:mm:ss.tt";for(var i=0,e=0,r=n.length;e<r;e++)i+=this.timeUnits[e]*parseInt(n[e]);return i},parsePlacement$value:function(t){var n=t.split(" ").filter(function(t){return t}),r={line:-1,position:"50%",size:"100%",align:"middle"};for(var i in n.forEach(function(t){var n=t.split(":"),i=n[1].split(","),e=n[0].toLowerCase();switch(e){case"d":e="vertical";break;case"l":e="line";break;case"t":e="position";break;case"s":e="size";break;case"a":e="align";break;case"vertical":case"line":case"position":case"size":case"align":break;default:throw"Bad position declaration, "+e}r[e]=i[0]||r[e]}),r.vertical="vertical"===r.vertical?"rl":"vertical-lr"===r.vertical?"lr":"horizontal",r){var e=r[i];switch(i){case"line":e=String(e||-1);break;case"position":e=String(e||"0%");break;case"size":e=String(e||"100%");break;case"align":switch(e=String(e||"middle")){case"start":case"middle":case"end":break;default:throw"Invalid align declaration"}}}return r},destroy:function(){for(var t=0,n=this.cues.length;t<n;t++)this.cues[t].destroy();this.cues.length=0,this.activeCues.length=0,this.media=null,this.el=null,this.stopListening()}},{READYSTATE:{NONE:0,LOADING:1,LOADED:2,ERROR:3}}),x.TextTrackCue=x.extend({region:null,track:null,id:null,startTime:null,endTime:null,vertical:null,snapToLines:null,line:null,lineAlign:null,position:null,positionAlign:null,size:null,textAlign:null,text:null,e:!1,live$get:function(){return this.e},live$set:function(t){var n;!this.e&&t?n="enter":this.e&&!t&&(n="exit"),n&&(this.e=t,this.trigger(n,this),this.track.media.dispatchEvent("cue"+n,{cue:this}))},constructor:function(t,n,i){this.id="cue-"+ ++x.TextTrackCue.id,this.startTime=t,this.endTime=n,this.text=i},getCueAsHTML:function(){var t=this.track.media.options.classprefix,n=document.createElement("span"),i={id:this.id,lang:this.track.language,class:t+"cue",style:""};for(var e in this.renderCuePlacement(i,this),i)n.setAttribute(e,i[e]);var r=document.createElement("span");return r.setAttribute("class",t+"cue-text"),r.innerHTML='<span class="'+t+'cue-line">'+this.text.replace(/\n/g,'</span><br><span class="'+t+'cue-line">')+"</span>",n.appendChild(r),n},renderCuePlacement$value:function(t,n){var i=this.track.media.options.classprefix,e=t.class.split(" ");e.push(i+"cue-"+n.vertical);var r="position: absolute;";switch(n.vertical){case"horizontal":switch(r+="transform: translateX(-50%);",n.lineAlign){case"start":r+="text-align: left;",e.push(i+"cue-align-left");break;case"middle":r+="text-align: center;",e.push(i+"cue-align-center");break;case"end":r+="text-align: right;",e.push(i+"cue-align-right")}r+="width:"+n.size+";",r+="left:"+n.position+";",-1<String(n.line).indexOf("%")||0<=n.line?(n.line,r+="top:"+n.line+"%"):r+="bottom:"+(100-100*Math.abs(n.line))+"%";break;case"rl":switch(r+="transform: translateY(-50%);",n.lineAlign){case"start":r+="text-align: left;",e.push(i+"cue-align-top");break;case"middle":r+="text-align: center;",e.push(i+"cue-align-middle");break;case"end":r+="text-align: right;",e.push(i+"cue-align-bottom")}r+="height:"+n.size+";",r+="top:"+n.position+";",-1<String(n.line).indexOf("%")||0<=n.line?(n.line,r+="left:"+n.line+"%"):r+="right:"+(100-100*Math.abs(n.line))+"%";break;case"lr":switch(r+="transform: translateY(-50%);",n.lineAlign){case"start":r+="text-align: left;",e.push(i+"cue-align-top");break;case"middle":r+="text-align: center;",e.push(i+"cue-align-middle");break;case"end":r+="text-align: right;",e.push(i+"cue-align-bottom")}r+="height:"+n.size+";",r+="top:"+n.position+";",-1<String(n.line).indexOf("%")||0<=n.line?(n.line,r+="right:"+n.line+"%"):r+="left:"+(100-100*Math.abs(n.line))+"%"}return t.class=e.join(" "),t.style=r,t},destroy:function(){this.media=null}},{id:0}),x.TextTrackList=x.List.extend({media:null,constructor:function(t){this.media=t,this.fetch()},fetch$value:function(){this.destroy();var e=0,r=0,s={},t=this.media.el.querySelectorAll("track[type='text/vtt']");h(t).forEach(function(t){var n=t.getAttribute("srclang"),i=t.getAttribute("src");n&&i&&!s[n]&&(r++,s[n]=new x.TextTrack(this.media,t),s[n].once("load",function(t){t.readyState===x.TextTrack.READYSTATE.ERROR?(r--,delete s[t.lang]):e++,e===r&&this.addTracks(function(t){var n=[];for(var i in t)n.push(t[i]);return n}(s))}.bind(this)))},this)},addTracks$value:function(t){for(var n=0,i=t.length;n<i;n++)this.addTrack(t[n])},addTrack:function(t){for(var n=0,i=this.length;n<i;n++)if(this[n]===t)return;this.push(t),this.trigger("add",t,this),this.media.dispatchEvent("addtexttrack",{track:t})},removeTrack:function(t){for(var n=!1,i=this.length-1;-1<i;i--)this[i]===t&&(this.splice(i,1),n=!0);n&&(this.trigger("remove",t,this),this.media.dispatchEvent("removetexttrack",{track:t}))},getTrackById:function(t){for(var n=0,i=this.length;n<i;n++)if(this[n].el.id===t)return this[n];return null},destroy:function(){for(var t=0,n=this.length;t<n;t++)this[t].destroy();this.length=0,this.stopListening()}}),x.defineProperties({utils$write:{}}),x.utils.Class=n,x.utils.List=w,x.utils.Elements=y,x.utils.elements=T,x.utils.Events=m,x.utils.EventsInitialize=f,x.utils.EventsArgumentsNotation=v,x.utils.EventRegister=b,x.utils.EventsRegistry=d,x.utils.properties=g,x.utils.toArray=h,x.utils.extend=l,x.utils.extendNotEnumerable=s,x.utils.deepDefaults=o,x.utils.defaults=a,x.utils.indexOfRegex=c,x.utils.includes=k,x.utils.bindAll=r,x.utils.removeAttribute=i,x.utils.removeElement=u,x.utils.createEvent=e,y=w.extend({subject:null,constructor:function(t,n){this.subject=n||document,this.add(t,this.subject),this.selector=t},filterByAttribute:function(e,r){var t=this.filter(function(t){var n=t.getAttribute(e);if(n){var i=n.split(" ");return!!k(i,r)||void 0}});return new y(t)},filterByTypes:function(t){var i=t.split(",").map(function(t){return t.trim()}),n=this.filter(function(t){var n=t.tagName.toLowerCase();if(k(i,n))return!0});return new y(n)},find:function(n){var i=new y;return this.forEach(function(t){i.push.apply(i,y.querySelectorAll(t,n))}),i},stack:function(n){var t=this.parents();return t.unshift(this[0]),n&&(t=t.filter(function(t){return t.matches(n)})),t},parents:function(n){for(var t=this[0],i=new y;(t=t.parentNode)&&i.add(t),t;);return n&&(i=i.filter(function(t){return t.matches(n)})),i},add:function(t,n){if(this.selector="",n=n||document,t instanceof HTMLElement)return this.push(t),this;if(t instanceof Array){for(var i=0,e=t.length;i<e;i++)this.add(t[i]);return this}if("string"!=typeof t)return this;var r=y.querySelectorAll(n,t);for(i=0,e=r.length;i<e;i++)this.push(r[i]);return this},clone:function(t){for(var n=[],i=0,e=this.length;i<e;i++)n.push(this[i].cloneNode(t));return new y(n,this.subject)},on:function(n,i,e){if(n instanceof Object){for(var t in n)this.on(t,n[t],i);return this}return this.forEach(function(t){t.addEventListener(n,i,e)}),this},off:function(n,i){if(n instanceof Object){for(var t in n)this.off(t,n[t]);return this}return this.forEach(function(t){t.removeEventListener(n,i)}),this}},{fallback:!1,combinatorWithOptionalWhiteSpace$value:/^( *([+~> ,]|\|\|){1} *)/,types$value:/(\[[^\]]+\])*((\.|\:|\#|\w|\*|\[){1}[^\[ >~|+,]*(\[[^\]]+\])*[^\[ >~|+,]*)/,querySelectorAll$value:function(t,n){if(!y.fallback)return t.querySelectorAll(n);var i=[],e=n.trim();do{var r=y.types.exec(e),s=y.combinatorWithOptionalWhiteSpace.exec(e);if(!r&&!s)break;switch(!r||s&&s.index<r.index?"combinator":"type"){case"combinator":var a=s[0];i.push(a),e=e.slice(a.length);break;case"type":a=r[0],i.push(a),e=e.slice(a.length)}}while(e.length);if(y.combinatorWithOptionalWhiteSpace.test(i[0])&&i.unshift(":scope"),":scope"===i[0])switch(i[1].trim()){case">":if(i.length<=2)throw"Invalid selector";for(var o=t.children,c=[],u=0,h=o.length;u<h;u++){var l=o[u];if(l.matches(i[2]))if(3!==i.length){var f=i.slice(3).join(" "),v=y.querySelectorAll(l,f);c.push.apply(c,v)}else c.push(l)}return c;default:throw"Invalid starting combinator for scope '"+i[1]+"'"}return t.querySelectorAll(n)}});try{document.createElement("div").querySelector(":scope > *"),y.fallback=!1}catch(t){console.log("No support for ':scope' selector. Using fallback."),y.fallback=!0}l(T=function(t,n){return new y(t,n)},y);}));
